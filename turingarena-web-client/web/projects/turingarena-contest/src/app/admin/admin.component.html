<ng-container *ngIf="adminQuery.valueChanges | async as result">
  <ng-container *ngIf="result.data as data">
    <nav class="topbar">
      <a routerLink="/admin" class="admin-home-link">
        <h1 class="admin-title">
          <fa-icon [icon]="faTools"></fa-icon> [Admin] {{data.contest.material.title | textVariant}}
        </h1>
      </a>
    </nav>

    <div class="admin-main">
      <aside class="admin-aside">
        <button class="admin-create-button" (click)="modalService.open(createDialog)">
          Set up contest
        </button>
        <a class="admin-section-link" routerLink="/admin/problems" routerLinkActive="active">
          Problems
        </a>
        <a class="admin-section-link" routerLink="/admin/contestants" routerLinkActive="active">
          Contestants
        </a>
        <a class="admin-section-link" routerLink="/admin/submissions" routerLinkActive="active">
          Submissions
        </a>
      </aside>

      <main class="admin-contestants" [hidden]="(route.firstChild!.data | async).adminSection !== 'contestants'">
        <label>Filter</label>
        <input [(ngModel)]="quickFilterText" />
        <button (click)="contestantsGridModel.deleteSelected()">Delete selected</button>
        <ag-grid-angular class="contestants-grid ag-theme-balham" [animateRows]="true" rowSelection="multiple"
          [quickFilterText]="quickFilterText">
        </ag-grid-angular>
      </main>

      <main class="admin-submissions" [hidden]="(route.firstChild!.data | async).adminSection !== 'submissions'">
        <label>Filter</label>
        <input [(ngModel)]="quickFilterText" />
        <app-admin-submissions [data]="data"></app-admin-submissions>
      </main>

      <main class="admin-problems" [hidden]="(route.firstChild!.data | async).adminSection !== 'problems'">
        <label>Filter</label>
        <input [(ngModel)]="quickFilterText" />
        <button (click)="problemsGridModel.deleteSelected()">Delete selected</button>
        <ag-grid-angular class="problems-grid ag-theme-balham" [rowDragManaged]="true" [animateRows]="true"
          rowSelection="multiple" [quickFilterText]="quickFilterText">
        </ag-grid-angular>
      </main>
    </div>
  </ng-container>
</ng-container>


<ng-template #createDialog let-modal>
  <app-admin-create-dialog [modal]="modal"></app-admin-create-dialog>
</ng-template>

<router-outlet></router-outlet>
